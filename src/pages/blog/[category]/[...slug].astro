---
import { getCollection } from 'astro:content';
import { collectionMetadata } from '@content/config';

export async function getStaticPaths() {

  const pages: any[] = [];

  // Build pages of each content
  for await (let c of collectionMetadata) {
    const ipfs = await getCollection(c.name as any);
    ipfs.map((post) => {
      pages.push({
        params: { category: c.name, slug: post.slug },
        props: post,
      })
    });
  }

  return pages;
}

const param = Astro.params;
const post = Astro.props;

console.log('param', param);

const { Content } = await post.render();
---

<Content />
