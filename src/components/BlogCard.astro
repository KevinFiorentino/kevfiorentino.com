---
export interface Props {
  slug: string;
  collection: string;
	title: string;
  desc: string;
  image: {
    url: string,
    alt: string
  };
  date: string;
}

const {
  slug,
  collection,
  title,
  desc,
  image,
  date,
} = Astro.props;

const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
const d = new Date(date);
const year = d.getFullYear();
const month = months[d.getMonth()];
const day = d.getDate();
---

<article class="blog-card-background hover:shadow-xl">
  <a href=`/blog/${collection}/${slug}` title={ title } class="flex transition">
    <div class="rotate-180 p-2 [writing-mode:_vertical-lr]">
      <time datetime={ date } class="flex items-center justify-between text-white text-xs font-bold uppercase gap-4">
        <span>{ year }</span>
        <span class="w-px flex-1"></span>
        <span>{ month } { day }</span>
      </time>
    </div>

    <div class="hidden sm:block sm:basis-56">
      <img class="aspect-square h-full w-full object-cover" src={ image.url } alt={ image.alt }/>
    </div>

    <div class="flex flex-1 flex-col justify-between">
      <div class="border-l border-gray-900/10 p-4 dark:border-white/10 sm:!border-l-transparent sm:p-6">
        <h3 class="font-bold uppercase text-white">
          { title }
        </h3>
        <p class="mt-2 text-sm leading-relaxed text-white line-clamp-3">
          { desc }
        </p>
      </div>

      <div class="sm:flex sm:items-end sm:justify-end">
        <div class="block px-5 py-3 text-center text-xs font-bold uppercase text-white transition">
          Read Article
        </div>
      </div>
    </div>
  </a>
</article>

<style>
  .blog-card-background {
    background: var(--meddle-background);
  }
  .block {
    background-color: var(--accent);
  }
</style>
